{% extends "client/template.html" %}
{% load static %}

{% block content %}
<style>
    p {
        color: grey
    }
    
    #heading {
        text-transform: uppercase;
        color: #673AB7;
        font-weight: normal
    }
    
    #msform {
        text-align: center;
        position: relative;
        margin-top: 20px
    }
    
    #msform fieldset {
        background: white;
        border: 0 none;
        border-radius: 0.5rem;
        box-sizing: border-box;
        width: 100%;
        margin: 0;
        padding-bottom: 20px;
        position: relative
    }
    
    .form-card {
        text-align: left
    }
    
    #msform fieldset:not(:first-of-type) {
        display: none
    }
    
    #msform input,
    #msform textarea {
        padding: 8px 15px 8px 15px;
        border: 1px solid #ccc;
        border-radius: 0px;
        margin-bottom: 25px;
        margin-top: 2px;
        width: 100%;
        box-sizing: border-box;
        font-family: montserrat;
        color: #2C3E50;
        background-color: #ECEFF1;
        font-size: 16px;
        letter-spacing: 1px
    }
    
    #msform input:focus,
    #msform textarea:focus {
        -moz-box-shadow: none !important;
        -webkit-box-shadow: none !important;
        box-shadow: none !important;
        border: 1px solid #673AB7;
        outline-width: 0
    }
    
    #msform .action-button {
        width: 100px;
        background: #673AB7;
        font-weight: bold;
        color: white;
        border: 0 none;
        border-radius: 0px;
        cursor: pointer;
        padding: 10px 5px;
        margin: 10px 0px 10px 5px;
        float: right
    }
    
    #msform .action-button:hover,
    #msform .action-button:focus {
        background-color: #311B92
    }
    
    #msform .action-button-previous {
        width: 100px;
        background: #616161;
        font-weight: bold;
        color: white;
        border: 0 none;
        border-radius: 0px;
        cursor: pointer;
        padding: 10px 5px;
        margin: 10px 5px 10px 0px;
        float: right
    }
    
    #msform .action-button-previous:hover,
    #msform .action-button-previous:focus {
        background-color: #000000
    }
    
    .card {
        z-index: 0;
        border: none;
        position: relative
    }
    
    .fs-title {
        font-size: 25px;
        color: #673AB7;
        margin-bottom: 15px;
        font-weight: normal;
        text-align: left
    }
    
    .purple-text {
        color: #673AB7;
        font-weight: normal
    }
    
    .steps {
        font-size: 25px;
        color: gray;
        margin-bottom: 10px;
        font-weight: normal;
        text-align: right
    }
    
    .fieldlabels {
        color: gray;
        text-align: left
    }
    
    #progressbar {
        margin-bottom: 30px;
        overflow: hidden;
        color: lightgrey
    }
    
    #progressbar .active {
        color: #673AB7
    }
    
    #progressbar li {
        list-style-type: none;
        font-size: 15px;
        width: 25%;
        float: left;
        position: relative;
        font-weight: 400
    }
    
    #progressbar #account:before {
        font-family: FontAwesome;
        content: "\f13e"
    }
    
    #progressbar #personal:before {
        font-family: FontAwesome;
        content: "\f007"
    }
    
    #progressbar #payment:before {
        font-family: FontAwesome;
        content: "\f030"
    }
    
    #progressbar #confirm:before {
        font-family: FontAwesome;
        content: "\f00c"
    }
    
    #progressbar li:before {
        width: 50px;
        height: 50px;
        line-height: 45px;
        display: block;
        font-size: 20px;
        color: #ffffff;
        background: lightgray;
        border-radius: 50%;
        margin: 0 auto 10px auto;
        padding: 2px
    }
    
    #progressbar li:after {
        content: '';
        width: 100%;
        height: 2px;
        background: lightgray;
        position: absolute;
        left: 0;
        top: 25px;
        z-index: -1
    }
    
    #progressbar li.active:before,
    #progressbar li.active:after {
        background: #673AB7
    }
    
    .progress {
        height: 20px
    }
    
    .progress-bar {
        background-color: #673AB7
    }
    
    .fit-image {
        width: 100%;
        object-fit: cover
    }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<section class="container py-36 rounded-2xl shadow">
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-11 col-sm-10 col-md-10 col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2">
                <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
                    <h2 id="heading">Sign Up Your User Account</h2>
                    <p>Fill all form field to go to next step</p>
                    <form id="msform" action="{% url 'candidate-register' %}" method="POST" enctype= 'multipart/form-data'>
                        {% csrf_token %}
                        <!-- progressbar -->
                        <ul id="progressbar">
                            <li class="active" id="account"><strong>Account</strong></li>
                            <li id="personal"><strong>Educational Qualification</strong></li>
                            <li id="payment"><strong>Professional Details</strong></li>
                            <li id="confirm"><strong>Authentication</strong></li>
                            {% comment %} <li id="confirm"><strong>Finish</strong></li> {% endcomment %}
                        </ul>
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                        </div> <br> <!-- fieldsets -->
                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">Account Information:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Step 1 - 4</h2>
                                    </div>
                                </div> 
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4" >
                                    <div>
                                        <label class="fieldlabels">Email: *</label> 
                                        <input type="email" class="form-input mt-3 rounded-md" name="email" placeholder="Email Id" /> 
                                    </div>
                                    <div>

                                        <label class="fieldlabels">First Name: *</label> 
                                        <input type="text" class="form-input mt-3 rounded-md" name="fname" placeholder="First Name" /> 
                                    </div>
                                    <div>

                                        <label class="fieldlabels">Last Name: *</label>
                                        <input type="text" class="form-input mt-3 rounded-md" name="lname" placeholder="Last Name" />
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                                    <div>
                                        
                                        <label class="fieldlabels">Contact No.: *</label> 
                                        <input type="text" class="form-input mt-3 rounded-md" name="phno" placeholder="Contact No." /> 
                                      
                                    </div>
                                    <div>

                                        <label class="fieldlabels">Whatsapp No.: *</label> 
                                        <input type="text" class="form-input mt-3 rounded-md"name="whatsapp" placeholder="Whatsapp  No." />
                                    </div>
                                    <div>

                                        <label class="fieldlabels">DOB: *</label>
                                        <input type="date" class="form-input mt-3 rounded-md" name="dob" />
                                    </div>
                                    {% comment %} <div>

                                        <label class="fieldlabels">Age: *</label>
                                        <input type="number" min="18" class="form-input mt-3 rounded-md" name="age" />
                                    </div> {% endcomment %}
                                    
                                </div>

                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                                    
                                    <div>
                                        <label class="fieldlabels">State: *</label> 
                                        <select name="state" class="form-input mt-3 rounded-md" id="state" onchange="loadCities()">
                                            <option value="form-input mt-3 rounded-md">Select State</option>
                                            <!-- State options will be dynamically added here -->
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label class="fieldlabels">City: *</label> 
                                        <select class="form-input mt-3 rounded-md" name="city" id="city">
                                            <option value="form-input mt-3 rounded-md">Select City</option>
                                            <!-- City options will be dynamically added here -->
                                        </select>
                                    </div>

                                    <div>
                                        <label class="fieldlabels">Location: *</label> 
                                        <input type="text"  class="form-input mt-3 rounded-md" name="location" placeholder="Location (Nearest Station)" />

                                    </div>
                                    
                                  
                                </div>
                          
                            </div> 
                            <input type="button" name="next" class="next action-button" value="Next" />
                        </fieldset>
                        {% comment %} ---------------------------- Professional Details  -------------------------- {% endcomment %}
                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">Educational Qualification:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Step 2 - 4</h2>
                                    </div>
                                </div> 
                                
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4" style="display:flex;justify-content: space-between;">
                                    
                                    <div>
                                        <label class="fieldlabels">Higest Qualification: *</label> 
                                        <select name="qualification"class="form-input mt-3 rounded-md">
                                            <option value="">-------Select ------</option>
                                            <option value="Graduate">Graduate</option>
                                            <option value="Post Graduate">Post Graduate</option>
                                            <option value="Under Graduate">Under Graduate</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label class="fieldlabels">Passing Year: *</label> 
                                        <select name="passing_year" id="passing_year" class="form-input mt-3 rounded-md">
                                            <option value="">-------- Select------</option>
                                        </select>
                                    </div>

                                    <div>
                                        <label class="fieldlabels">Additional Qualification: *</label> 
                                        <select name="additional_qualification"class="form-input mt-3 rounded-md">
                                            <option value="">-------Select ------</option>
                                            <option value="Diploma">Diploma</option>
                                            <option value="MBA">MBA</option>
                                            <option value="Certificate Course">Certificate Course</option>
                                            <option value="Import / Export">Import / Export</option>
                                            <option value="Shipping Locgistics">Shipping Locgistics</option>
                                            <option value="Custome Clearance">Custome Clearance</option>
                                            <option value="Other">Other</option>

                                        </select>
                                    </div>

                                    <div>
                                        <label class="fieldlabels">Specialised In : *</label> 
                                        <select name="specialised"class="form-input mt-3 rounded-md">
                                            <option value="">-------Select ------</option>
                                            <option value="Import / Export">Import / Export</option>
                                            <option value="Shipping Management">Shipping Management</option>
                                            <option value="International Business">International Business</option>
                                            <option value="Foreign Trade">Foreign Trade</option>
                                            <option value="Marketing">Marketing</option>
                                            <option value="Locgistics">Locgistics</option>
                                            <option value="Operation">Operation</option>
                                            <option value="Supply Chain">Supply Chain</option>
                                            <option value="Warehousing">Warehousing</option>
                                            <option value="Finance">Finance</option>
                                            <option va  lue="Other">Other</option>

                                        </select>
                                    </div>
                                    
                                  
                                </div>
                                
                                
                                 <div class="mb-4 md:flex grid grid-cols-1 lg:grid-cols-3 gap-4">
                                    <div class="md:w-2/5 px-3 md:flex-col flex">
                                        <label class="font-semibold fieldlabels" for="Skillname">Skills:</label>
                                    </div>
                                    <div class="text-sm md:flex block w-full md:w-4/5 gap-2  " id="skillsContainer">
                                        <select id="skills" class="form-select form-input border block w-full mt-1" onchange="handleSkillChange()">
                                            <option value="">Select</option>
                                            {% for skill in skills %}
                                        
                                        <option value="{{skill.name}}">{{skill.name}}</option>
                                        {% endfor %}
                                        
                                            <option >Other</option>
                                        </select>
                                        <input type="text" id="customSkillInput" style="display: none;" placeholder="Enter Custom Skill">
                                        <button id="addSkill" type="button" class="btn bg-blue-900 text-white" onclick="addNewSkill()">Add</button>
                                        <!-- Readonly input to store added skills -->
                                        <input type="hidden" class="bg-blue-300 text-blue-900 rounded-full p-2 m-2" id="addedSkills" name="addedSkills" readonly>
                                    </div>
                                </div>

                            </div> 
                            <input type="button" name="next" class="next action-button" value="Next" />
                             <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                        </fieldset>
                        <fieldset>
                            <div class="form-card">
                                    <div class="row">
                                        <div class="col-7">
                                            <h2 class="fs-title">Professional Details:</h2>
                                        </div>
                                        <div class="col-5">
                                            <h2 class="steps">Step 3 - 4</h2>
                                        </div>
                                    </div> 
                                    <div class="w-full flex">
                                        <div class="mb-4 text-start grid grid-cols-1 lg:grid-cols-2 gap-2 " >
                                            <div class=" px-3">
                                                <label class="font-semibold">Fresher OR Experienced :* <span style="color:red">*</span>:</label>
                                            </div>
                                            <div class="text-sm flex w-full gap-3 px-2">
                                                <div class="flex   gap-2">
                                                    <input type="radio" id="fresher" name="experience" value="Fresher">
                                                    <label for="fresher">Fresher</label>
                                                </div>
                                                <div class="flex  gap-2">
                                                    <input type="radio" id="experienced" name="experience" value="Experienced">
                                                    <label for="experienced">Experienced</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div style="display:flex">
                                        <div style="margin:2px">

                                            <label class="fieldlabels">Upload Your Photo:</label> 
                                            <input type="file" name="pic" accept="image/*"> 
                                        </div>
                                        <div style="margin:2px">

                                            <label class="fieldlabels">Upload Resume:</label> 
                                            <input type="file" name="resume"> 
                                        </div>
                                    </div>
                                    <div style="display:none" id="experienceForm">
                                         <div class="flex flex-col">
                                            <div>

                                                <label class="fieldlabels">Total Experience in Exim Industry: </label>
                                                {% comment %} <input type="number" min='0' name="exim_experience" placeholder="Total Experience in Exim Industry." /> {% endcomment %}
                                            </div>
                                            <div class="text-sm grid lg:grid-cols-2  grid-cols-1 m-2 p-2">
                                                <div class=" text-start">
                                                    <label class="font-semibold md:invisible md:block hidden">Years</label>
                                                    <div class="relative mt-1">
                                                        
                                                        <input type="number" class="form-input border border-slate-100 dark:border-slate-800 ps-12" placeholder="In years" name="exim_yr_experience">
                                                    </div>
                                                </div>
        
                                                <div class=" text-start">
                                                    <label class="font-semibold md:invisible md:block hidden">Months</label>
                                                    <div class="relative mt-1">
                                                        
                                                        <input type="number" class="form-input border border-slate-100 dark:border-slate-800 ps-12" placeholder="in months" name="exim_mn_experience">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="flex flex-col">
                                            <div>
                                                <label class="fieldlabels">Total Yrs in Current Company: </label>
                                            </div>
                                            {% comment %} <input type="text" name="total_years_current_company" placeholder="Total Yrs in Current Company." /> {% endcomment %}
                                            <div class="text-sm grid lg:grid-cols-2  grid-cols-1 m-2 p-2">
                                                <div class=" text-start">
                                                    <label class="font-semibold md:invisible md:block hidden">Years</label>
                                                    <div class="relative mt-1">
                                                        
                                                        <input type="number" class="form-input border border-slate-100 dark:border-slate-800 ps-12" placeholder="In years" name="current_yr_experience">
                                                    </div>
                                                </div>
        
                                                <div class=" text-start">
                                                    <label class="font-semibold md:invisible md:block hidden">Months</label>
                                                    <div class="relative mt-1">
                                                        
                                                        <input type="number" class="form-input border border-slate-100 dark:border-slate-800 ps-12" placeholder="in months" name="current_mn_experience">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <label class="fieldlabels" >Last Employer: </label>
                                        <input type="text" name="last_employer" placeholder="Last Employer." />
                                
                                        <div class="text-sm md:flex block w-full md:w-4/5 gap-2" id="industryContainer">
                                            <label class="fieldlabels">Current Industry Type:</label>
                                            <select id="current_industry_dropdown" class="form-select form-input border block w-full mt-1">
                                                <option value="">Select</option>
                                                {% for i in industry %}
                                                    <option value="{{i.id}}">{{i.name}}</option>
                                                {% endfor %}
                                            </select>
                                            <button id="addNewIndustry" type="button" class="btn bg-blue-900 text-white" onclick="addNewIndustry()">Add</button>
                                            <!-- Container for displaying selected industries as buttons -->
                                            <!-- Hidden input to store added industries -->
                                            <input type="hidden" id="current_industry" name="current_industry">
                                        </div>
                                        <div id="selectedIndustries" class="m-2"></div>
                                        
                                        <div>

                                            <label class="fieldlabels">Functional Area:</label>
                                            <select name="functional_area" id="functional_area" class="form-select form-input border block w-full mt-1">
                                                <!-- Options will be populated dynamically based on the selected industry -->
                                            </select>
                                            <button id="addFuntionalArea" type="button" class="btn bg-blue-900 text-white" onclick="addFuntionalArea_()">Add</button>
                                            <!-- Container for displaying selected industries as buttons -->
                                            <!-- Hidden input to store added industries -->
                                            <input type="hidden" id="funtional_area" name="funtional_area">
                                        </div>
                                        <div id="selectedFuntionalArea" class="m-2"></div>


                                        <label class="fieldlabels">Current Position: </label>
                                        <select name="current_position" id="position" class="form-select form-input border block w-full" required="">
                                            <option >Select</option>
                                            <option value="Assistant">Assistant</option>
                                            <option value="Asst. Management">Asst. Management</option>
                                            <option value="Jr. Executive">Jr. Executive</option>
                                            <option value="Middle Management">Middle Management</option>
                                            <option value="Office Boy">Office Boy</option>
                                            <option value="Sr. Executive">Sr. Executive</option>
                                            <option value="Sr. Management">Sr. Management</option>
                                            <option value="Others">Others</option>                                             
                                        </select>
                                        
                                        
                                        <div class="mb-4 text-start grid grid-cols-1 lg:grid-cols-2 gap-2 " >
                                            <div class="md:w-2/5 px-3 ">
                                                <label class="font-semibold" for="RegisterName">Operational Area Expertise <span style="color:red">*</span>:</label>
                                                
                                            </div>
                                            <div class="text-sm flex w-full  gap-3 px-2">
                                                    <div class="flex  gap-2">
                                                        <input type="radio" id="import" name="operational_area" value="Import">
                                                        <label for="import">Import</label>
                                                    </div>
                                                    <div class="flex  gap-2">
                                                        <input type="radio" id="export" name="operational_area" value="Export">
                                                        <label for="export">Export</label>
                                                    </div>
                                                    <div class="flex  gap-2">
                                                        <input type="radio" id="other" name="operational_area" value="Other">
                                                        <label for="other">Other</label>
                                                    </div>
        
                                            </div>
                                            
                                        </div>
        
                                        <div class="mb-4 text-start grid grid-cols-1 lg:grid-cols-2 gap-2" >
                                            <div class="md:w-2/5 px-3 ">
                                                <label class="font-semibold" for="RegisterName">Shipment Expertise <span style="color:red">*</span>:</label>
                                                
                                            </div>
                                            <div class="text-sm flex w-full md:w-4/5 gap-3 px-2">
                                                    <div class="flex  gap-2">
                                                        <input type="radio" id="sea" name="shipment_expertise" value="Sea">
                                                        <label for="sea">Sea</label>
                                                    </div>
                                                    <div class="flex  gap-2">
                                                        <input type="radio" id="air" name="shipment_expertise" value="Air">
                                                        <label for="air">Air</label>
                                                    </div>
                                                    <div class="flex  gap-2">
                                                        <input type="radio" id="both" name="shipment_expertise" value="Both">
                                                        <label for="both">Both</label>
                                                    </div>
        
                                            </div>
                                            
                                        </div>
                                        <label class="fieldlabels">Current Monthly Salary: </label>
                                        <input type="number" min="0" name="current_salary" placeholder="Current Salary." />
                                    </div>
                                    
                                </div> 
                                <input type="button" name="next" class="next action-button" value="Next" />
                             <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                        </fieldset>



                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">Authentication:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Step 4 - 4</h2>
                                    </div>
                                </div> 
                                
                                <label class="fieldlabels">Password: *</label> 
                                <input type="password" name="pwd" placeholder="Password" />
                                 <label class="fieldlabels">Confirm Password: *</label> 
                                 <input type="password" name="cpwd" placeholder="Confirm Password" /> 
                            </div> 
                            <input type="submit"  class="next action-button" value="Submit" /> <input type="button" name="previous" class="previous action-button-previous" value="Previous" />

                        </fieldset>
                        
                    </form>
                </div>
            </div>
        </div>
    </div>
    

<script>
    

    document.addEventListener("DOMContentLoaded", function() {
        var current_fs, next_fs, previous_fs; // fieldsets
        var opacity;
        var current = 1;
        var steps = document.querySelectorAll("fieldset").length;
        setProgressBar(current);
    
        document.querySelectorAll(".next").forEach(function(button) {
            button.addEventListener("click", function() {
                current_fs = this.parentElement;
                next_fs = this.parentElement.nextElementSibling;
    
                // Add Class Active
                document.querySelectorAll("#progressbar li")[Array.from(document.querySelectorAll("fieldset")).indexOf(next_fs)].classList.add("active");
    
                // Show the next fieldset
                next_fs.style.display = "block";
    
                // Hide the current fieldset with style
                current_fs.style.opacity = 0;
                var animationInterval = setInterval(function() {
                    opacity = parseFloat(current_fs.style.opacity);
                    if (opacity <= 0) {
                        clearInterval(animationInterval);
                        current_fs.style.display = "none";
                        next_fs.style.opacity = 1;
                    } else {
                        current_fs.style.opacity = (opacity - 0.1).toString();
                    }
                }, 50);
    
                setProgressBar(++current);
            });
        });
    
        document.querySelectorAll(".previous").forEach(function(button) {
            button.addEventListener("click", function() {
                current_fs = this.parentElement;
                previous_fs = this.parentElement.previousElementSibling;
    
                // Remove class active
                document.querySelectorAll("#progressbar li")[Array.from(document.querySelectorAll("fieldset")).indexOf(current_fs)].classList.remove("active");
    
                // Show the previous fieldset
                previous_fs.style.display = "block";
    
                // Hide the current fieldset with style
                current_fs.style.opacity = 0;
                var animationInterval = setInterval(function() {
                    opacity = parseFloat(current_fs.style.opacity);
                    if (opacity <= 0) {
                        clearInterval(animationInterval);
                        current_fs.style.display = "none";
                        previous_fs.style.opacity = 1;
                    } else {
                        current_fs.style.opacity = (opacity - 0.1).toString();
                    }
                }, 50);
    
                setProgressBar(--current);
            });
        });
    
        function setProgressBar(curStep) {
            var percent = parseFloat(100 / steps) * curStep;
            percent = percent.toFixed();
            document.querySelector(".progress-bar").style.width = percent + "%";
        }
    
        document.querySelector(".submit").addEventListener("click", function() {
            return false;
        });
    });
    
</script>
<script>
    function handleSkillChange() {
        const skillsDropdown = document.getElementById('skills');
        const customSkillInput = document.getElementById('customSkillInput');

        // Show/hide the custom skill input based on the selected option
        customSkillInput.style.display = skillsDropdown.value === 'Other' ? 'inline-block' : 'none';
    }

    function addNewSkill() {
        const skillsDropdown = document.getElementById('skills');
        const customSkillInput = document.getElementById('customSkillInput');
        const addedSkillsInput = document.getElementById('addedSkills');
        const selectedSkill = skillsDropdown.value === 'Other' ? customSkillInput.value : skillsDropdown.value;

        // Check if the skill is already added
        if (selectedSkill && addedSkillsInput.value.includes(selectedSkill)) {
            alert('Skill already added!');
            return;
        }

        // Create a new skill container span
        const skillContainer = document.createElement('span');

        // Create a new button to display the added skill and allow removal
        const skillButton = document.createElement('button');
        skillButton.classList.add('btn', 'bg-blue-300', 'rounded-full');
        skillButton.textContent = selectedSkill;
        skillButton.onclick = function() {
            // Remove the corresponding skill when the button is clicked
            const removedSkill = skillButton.textContent;
            const addedSkills = addedSkillsInput.value ? JSON.parse(addedSkillsInput.value) : [];
            addedSkillsInput.value = JSON.stringify(addedSkills.filter(skill => skill !== removedSkill));

            // Remove the skill button from the DOM
            skillContainer.remove();
        };

        // Append the skill button to the skill container
        skillContainer.appendChild(skillButton);

        // Append the skill container to the skills container
        skillsContainer.appendChild(skillContainer);

        // Append the added skill to the hidden input as an array
        const addedSkills = addedSkillsInput.value ? JSON.parse(addedSkillsInput.value) : [];
        addedSkills.push(selectedSkill);
        addedSkillsInput.value = JSON.stringify(addedSkills);

        // Reset the dropdown and custom skill input to the default state
        skillsDropdown.value = '';
        customSkillInput.value = '';
        customSkillInput.style.display = 'none';
    }
</script>

{% comment %} State and City {% endcomment %}
<script>
    var accessToken;  // Declare accessToken in the global scope

    // Step 1: Get Access Token
    fetch("https://www.universal-tutorial.com/api/getaccesstoken", {
        method: "GET",
        headers: {
            "Accept": "application/json",
            "api-token": "lv8kpt1RcPmtXC3iWGOR1MuDYy5T0030EtLgZavfwZ-pYVbxLOje1ByAhrhQvK007Qo",
            "user-email": "hrithikhadawale75@gmail.com"
        }
    })
    .then(response => response.json())
    .then(tokenResponse => {
        if (tokenResponse.error) throw new Error(tokenResponse.error);

        // Set the accessToken in the global scope
        accessToken = tokenResponse.auth_token;

        // Use Access Token to get States
        return fetch("https://www.universal-tutorial.com/api/states/India", {
            method: "GET",
            headers: {
                "Authorization": "Bearer " + accessToken,
                "Accept": "application/json"
            }
        });
    })
    .then(statesResponse => statesResponse.json())
    .then(states => {
        // Add state options to the state dropdown
        var stateDropdown = document.getElementById("state");
        states.forEach(state => {
            var option = document.createElement("option");
            option.value = state.state_name;
            option.text = state.state_name;
            stateDropdown.add(option);
        });
    })
    .catch(error => {
        console.error("Error fetching states:", error);
    });

    function loadCities() {
        var stateDropdown = document.getElementById("state");
        var cityDropdown = document.getElementById("city");

        // Get the selected state value
        var selectedState = stateDropdown.value;

        // Clear existing options in city dropdown
        cityDropdown.innerHTML = '<option value="">-------Select ------</option>';

        // If a state is selected, fetch cities for that state
        if (selectedState !== "") {
            fetch(`https://www.universal-tutorial.com/api/cities/${selectedState}`, {
                method: "GET",
                headers: {
                    "Authorization": "Bearer " + accessToken,
                    "Accept": "application/json"
                }
            })
            .then(response => response.json())
            .then(cities => {
                // Add city options to the city dropdown
                cities.forEach(city => {
                    var option = document.createElement("option");
                    option.value = city.city_name;
                    option.text = city.city_name;
                    cityDropdown.add(option);
                });
            })
            .catch(error => console.error(error));
        }
    }
</script>


{% comment %} Passing Year {% endcomment %}

<script>
    var currentYear = new Date().getFullYear();
    var passingYearDropdown = document.getElementById("passing_year");

    // Add options for passing years less than the current year
    for (var year = currentYear; year >= currentYear - 100; year--) {
        var option = document.createElement("option");
        option.value = year;
        option.text = year;
        passingYearDropdown.add(option);
    }
</script>


<script>
    var experienceRadio = document.getElementsByName('experience');
    var experienceForm = document.getElementById('experienceForm');

    // Add an event listener to the radio buttons
    experienceRadio.forEach(function (radio) {
        radio.addEventListener('change', function () {
            // Toggle the visibility of experienceForm based on the selected value
            experienceForm.style.display = (this.value === 'Experienced') ? 'block' : 'none';
        });
    });
</script>
</section>

    
<script>
    function addFuntionalArea_() {
        var dropdown = document.getElementById('functional_area');
        var hiddenInput = document.getElementById('funtional_area');
        var selectedValue = dropdown.value;
        var selectedText = dropdown.options[dropdown.selectedIndex].text;
        var selectedContainer = document.getElementById('selectedFuntionalArea');
        
        console.log(selectedValue)

        if (!selectedValue) {
            alert("Please select a functional area.");
            return;
        }
    
        var existingValues = hiddenInput.value ? hiddenInput.value.split(', ') : [];
        // Check if already three functional areas are added
        if (existingValues.length >= 3) {
            alert("You can add a maximum of 3 functional areas.");
            return;
        }
    
        if (!existingValues.includes(selectedValue)) {
            existingValues.push(selectedValue);
            hiddenInput.value = existingValues.join(', ');
    
            // Create and append the button for the newly added functional area
            var areaButton = document.createElement('button');
            areaButton.textContent = selectedText + " ✖"; // Add visual cue for removal
            areaButton.classList.add("btn", "bg-blue-300", "text-blue-900", "rounded-full", "p-2", "m-2");
            areaButton.onclick = function() { removeFuntionalArea(selectedValue, areaButton); };
            selectedContainer.appendChild(areaButton);
        } else {
            alert("This functional area is already added.");
        }
    }
    
    function removeFuntionalArea(value, buttonElement) {
        var hiddenInput = document.getElementById('funtional_area');
        var existingValues = hiddenInput.value.split(', ');
        var index = existingValues.indexOf(value);
    
        if (index > -1) {
            existingValues.splice(index, 1); // Remove the functional area from the array
            hiddenInput.value = existingValues.join(', ');
            buttonElement.remove(); // Remove the button from the display
        }
    }
    
    
    
    function updateFunctionalAreas() {
        var hiddenInput = document.getElementById('current_industry');
        var selectedIndustries = hiddenInput.value; // This is your list of selected industry IDs
        var functionalAreaDropdown = document.getElementById('functional_area');
        console.log(selectedIndustries);
        if (selectedIndustries) {
            fetch(`http://127.0.0.1:8000/api-functionalArea/?ids=${selectedIndustries}`)
            .then(response => response.json())
            .then(data => {
                    // Assuming the API returns an array of functional areas
                    // Clear existing options first
                    functionalAreaDropdown.innerHTML = '';
                    // Add a default option
                    var defaultOption = new Option("Select Functional Area", "");
                    functionalAreaDropdown.add(defaultOption);
    
                    // Populate the dropdown with options from the API response
                    data.forEach(function(area) {
                        console.log(area)
                        var option = new Option(area.name, area.id); // Assuming 'name' and 'id' are the properties
                        functionalAreaDropdown.add(option);
                    });
                })
                .catch(error => console.error('Error fetching functional areas:', error));
        } else {
            // Clear the dropdown if no industries are selected
            functionalAreaDropdown.innerHTML = '';
            var defaultOption = new Option("Select Functional Area", "");
            functionalAreaDropdown.add(defaultOption);
        }
    }
    document.addEventListener('DOMContentLoaded', function() {
        function addNewIndustry() {
            var dropdown = document.getElementById('current_industry_dropdown');
            var hiddenInput = document.getElementById('current_industry');
            var selectedValue = dropdown.value; // Simplified
            var selectedIndustry = dropdown.options[dropdown.selectedIndex].text;
            var selectedIndustriesContainer = document.getElementById('selectedIndustries');
    
            if (!selectedValue) {
                alert("Please select an industry.");
                return;
            }
    
            var existingValues = hiddenInput.value ? hiddenInput.value.split(', ') : [];
            if (existingValues.length >= 2) {
                alert("You can add a maximum of 2 industries.");
                return;
            }
    
            if (!existingValues.includes(selectedValue)) {
                existingValues.push(selectedValue);
                hiddenInput.value = existingValues.join(', ');
    
                // Create and append the button for the newly added industry
                var industryButton = document.createElement('button');
                industryButton.textContent = selectedIndustry + " ✖"; // Add visual cue for removal
                industryButton.classList.add("btn", "bg-blue-300", "text-blue-900", "rounded-full", "p-2", "m-2");
                industryButton.onclick = function() { removeIndustry(selectedValue, industryButton); };
                selectedIndustriesContainer.appendChild(industryButton);
                updateFunctionalAreas();
            } else {
                alert("This industry is already added.");
            }
        }
        function removeIndustry(value, buttonElement) {
            var hiddenInput = document.getElementById('current_industry');
            var existingValues = hiddenInput.value.split(', ');
            var index = existingValues.indexOf(value);
    
            if (index > -1) {
                existingValues.splice(index, 1); // Remove the industry from the array
                hiddenInput.value = existingValues.join(', ');
                buttonElement.remove(); // Remove the button from the display
                updateFunctionalAreas();
            }
        }
        
    
        // Bind the addNewIndustry function to the Add button click event
        document.getElementById('addNewIndustry').addEventListener('click', addNewIndustry);
    });
</script>
    


{% endblock content %}